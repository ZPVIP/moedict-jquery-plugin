(function(){(function(e){var t;t={initialized_a:!1,regex_a:null,initialized_t:!1,regex_t:null,initialized_h:!1,regex_h:null},window._moedictDataCallback=function(e){var n,a,l,r;return n="a",null!=e.lenToRegex?(n="a",a=e.lenToRegex):null!=e.lenToRegex_t?(n="t",a=e.lenToRegex_t):null!=e.lenToRegex_h&&(n="h",a=e.lenToRegex_h),l=Object.keys(a).sort(function(e,t){return t-e}),r=[],l.forEach(function(e){return r.push(a[e])}),t["regex_"+n]=RegExp(r.join("|"),"g"),t["initialized_"+n]=!0},e.fn.moedict=function(n){var a,l,r=this;return n=e.extend({lang:"a","class":"moedict-word",spaced:!1,draw:!1,analyze:!1,dryrun:!1,callback:null},n),-1===["a","t","h"].indexOf(n.lang)&&(n.lang="a"),a=function(){return r.each(function(){var a,l,r,i,c,o,u,s;if(a=e(this),l=null!=(r=t["regex_"+n.lang])?r:t.regex_a,i=function(){switch(n.lang){case"t":return"!";case"h":return":";default:return""}}(),n.analyze){if(c=a.text(),o={},c.replace(l,function(e){return o[e]?o[e]++:o[e]=1}),n.callback)return n.callback.call(a,o)}else{if(u=a.html(),s=u.replace(l,function(e){var t;return t=n.draw?"<a href='https://www.moedict.tw/?draw#"+i+e+"' class='"+n["class"]+"'>"+e+"</a>":"<a href='https://www.moedict.tw/#"+i+e+"' class='"+n["class"]+"'>"+e+"</a>",n.spaced&&(t+=" "),t}),!n.dryrun)return a.html(s),a.find("a."+n["class"]).hoverIntent({timeout:250,out:function(){},over:function(){var e;return jQuery("#moedict").remove(),e=jQuery(this).attr("href"),jQuery("<iframe id='moedict' name='moedict' src='"+e+"' style='float: right; height: 90%; width: 40%; margin: 0; border-radius: 20px' />").prependTo("body")}});if(n.callback)return n.callback.call(a,s)}}),r},l=function(t){return e.ajax({type:"GET",dataType:"jsonp",jsonp:!1,cache:!0,jsonCallback:"_moedictDataCallback",url:"https://www.moedict.tw/lenToRegex."+n.lang+".json.js",complete:function(){return t?t.call():void 0}})},t["initialized_"+n.lang]?a():l(a)}}).call(this,jQuery)}).call(this);