(function(){(function(e){var t;t={initialized_a:!1,regex_a:null,initialized_t:!1,regex_t:null,initialized_h:!1,regex_h:null},window._moedictDataCallback=function(e){var n,a,r,l;return n="a",null!=e.lenToRegex?(n="a",a=e.lenToRegex):null!=e.lenToRegex_t?(n="t",a=e.lenToRegex_t):null!=e.lenToRegex_h&&(n="h",a=e.lenToRegex_h),r=Object.keys(a).sort(function(e,t){return t-e}),l=[],r.forEach(function(e){return l.push(a[e])}),t["regex_"+n]=RegExp(l.join("|"),"g"),t["initialized_"+n]=!0},e.fn.moedict=function(n){var a,r,l=this;return n=e.extend({lang:"a","class":"moedict-word",spaced:!1,draw:!1,analyze:!1,dryrun:!1,callback:null},n),-1===["a","t","h"].indexOf(n.lang)&&(n.lang="a"),a=function(){return l.each(function(){var a,r,l,i,c,o,u,d;if(a=e(this),r=null!=(l=t["regex_"+n.lang])?l:t.regex_a,i=function(){switch(n.lang){case"t":return"!";case"h":return":";default:return""}}(),n.analyze){if(c=a.text(),o={},c.replace(r,function(e){return o[e]?o[e]++:o[e]=1}),n.callback)return n.callback.call(a,o)}else{if(u=a.html(),d=u.replace(r,function(e){var t;return t=n.draw?"<a href='https://www.moedict.tw/?draw#"+i+e+"' class='"+n["class"]+"'>"+e+"</a>":"<a href='https://www.moedict.tw/#"+i+e+"' class='"+n["class"]+"'>"+e+"</a>",n.spaced&&(t+=" "),t}),!n.dryrun)return a.html(d),a.find("a."+n["class"]).hoverIntent({timeout:250,out:function(){},over:function(){var e,t;return e=jQuery(this).attr("href"),0===jQuery("#moedict").length?(jQuery("<div id='moedict' style='float: right; height: 90%; width: 40%; margin: 0;' >\n  <iframe id='moedictFrame' name='moedictFrame' src='"+e+"' style='width: 100%; height: 100%; margin: 0; border-radius: 20px;' />\n</div>").prependTo("body"),t=jQuery("#moedict"),jQuery(window).scroll(function(){return t.css("margin-top",window.scrollY)})):jQuery("#moedictFrame").attr("src",e)}});if(n.callback)return n.callback.call(a,d)}}),l},r=function(t){return e.ajax({type:"GET",dataType:"jsonp",jsonp:!1,cache:!0,jsonCallback:"_moedictDataCallback",url:"https://www.moedict.tw/lenToRegex."+n.lang+".json.js",complete:function(){return t?t.call():void 0}})},t["initialized_"+n.lang]?a():r(a)},e.fn.moedict.VERSION="1.1.0"}).call(this,jQuery)}).call(this);