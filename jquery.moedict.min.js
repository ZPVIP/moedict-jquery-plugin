(function(){(function(e){var t;t={initialized_a:!1,regex_a:null,initialized_t:!1,regex_t:null,initialized_h:!1,regex_h:null},window._moedictDataCallback=function(e){var n,i,r,o;return n="a",null!=e.lenToRegex?(n="a",i=e.lenToRegex):null!=e.lenToRegex_t?(n="t",i=e.lenToRegex_t):null!=e.lenToRegex_h&&(n="h",i=e.lenToRegex_h),r=Object.keys(i).sort(function(e,t){return t-e}),o=[],r.forEach(function(e){return o.push(i[e])}),t["regex_"+n]=RegExp(o.join("|"),"g"),t["initialized_"+n]=!0},e.fn.moedict=function(n){var i,r,o=this;return n=e.extend({lang:"a","class":"moedict-word",spaced:!1,draw:!1,analyze:!1,dryrun:!1,callback:null},n),-1===["a","t","h"].indexOf(n.lang)&&(n.lang="a"),i=function(){return o.each(function(){var i,r,o,a,c,l,u,d;if(i=e(this),r=null!=(o=t["regex_"+n.lang])?o:t.regex_a,a=function(){switch(n.lang){case"t":return"!";case"h":return":";default:return""}}(),n.analyze){if(c=i.text(),l={},c.replace(r,function(e){return l[e]?l[e]++:l[e]=1}),n.callback)return n.callback.call(i,l)}else{if(u=i.html(),d=u.replace(r,function(e){var t;return t=n.draw?"<a href='https://www.moedict.tw/?draw#"+a+e+"' class='"+n["class"]+"'>"+e+"</a>":"<a href='https://www.moedict.tw/#"+a+e+"' class='"+n["class"]+"'>"+e+"</a>",n.spaced&&(t+=" "),t}),!n.dryrun)return i.html(d),i.find("a."+n["class"]).moedictHoverIntent({timeout:250,out:function(){},over:function(e){var t;return t=jQuery(this).attr("href"),0===jQuery("#moedict").length?jQuery("<div id='moedict' style='position:absolute; height: 90%; width: 40%; margin: 0; z-index:9999;' >\n  <div id='moedict-controls' style='padding-right: 20px; background-color: #F8F9F8; text-align:right;'><a href=\"#\" onclick='jQuery(\"#moedict\").css({left: (jQuery(\"#moedict\").position().left < (document.body.clientWidth/2)?(document.body.clientWidth-jQuery(\"#moedict\").width()):0)});return false;'>←→</a> | <a href=\"#\" onclick='jQuery(\"#moedict\").hide();return false;'>X</a></div>\n  <iframe id='moedictFrame' name='moedictFrame' src='"+t+"' style='width: 100%; height: 100%; margin: 0; border-radius: 20px;' />\n</div>").prependTo("body"):jQuery("#moedictFrame").attr("src",t),jQuery("#moedict").css({top:window.scrollY+document.body.clientHeight/20,left:document.body.clientWidth/2>e.pageX?document.body.clientWidth-jQuery("#moedict").width():0}).show()}});if(n.callback)return n.callback.call(i,d)}}),o},r=function(t){return e.ajax({type:"GET",dataType:"jsonp",jsonp:!1,cache:!0,jsonCallback:"_moedictDataCallback",url:"https://www.moedict.tw/lenToRegex."+n.lang+".json.js",complete:function(){return t?t.call():void 0}})},t["initialized_"+n.lang]?i():r(i)},e.fn.moedict.VERSION="1.1.0"}).call(this,jQuery)}).call(this),function(e){e.fn.moedictHoverIntent=function(t,n){var i={sensitivity:7,interval:100,timeout:0};i=e.extend(i,n?{over:t,out:n}:t);var r,o,a,c,l=function(e){r=e.pageX,o=e.pageY},u=function(t,n){return n.hoverIntent_t=clearTimeout(n.hoverIntent_t),Math.abs(a-r)+Math.abs(c-o)<i.sensitivity?(e(n).unbind("mousemove",l),n.hoverIntent_s=1,i.over.apply(n,[t])):(a=r,c=o,n.hoverIntent_t=setTimeout(function(){u(t,n)},i.interval),void 0)},d=function(e,t){return t.hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=0,i.out.apply(t,[e])},s=function(t){var n=jQuery.extend({},t),r=this;r.hoverIntent_t&&(r.hoverIntent_t=clearTimeout(r.hoverIntent_t)),"mouseenter"==t.type?(a=n.pageX,c=n.pageY,e(r).bind("mousemove",l),1!=r.hoverIntent_s&&(r.hoverIntent_t=setTimeout(function(){u(n,r)},i.interval))):(e(r).unbind("mousemove",l),1==r.hoverIntent_s&&(r.hoverIntent_t=setTimeout(function(){d(n,r)},i.timeout)))};return this.bind("mouseenter",s).bind("mouseleave",s)}}(jQuery);