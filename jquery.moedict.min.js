(function(){(function(e){var t;t={initialized_a:!1,regex_a:null,initialized_t:!1,regex_t:null,initialized_h:!1,regex_h:null},window._moedictDataCallback=function(e){var n,r,i,a;return n="a",null!=e.lenToRegex?(n="a",r=e.lenToRegex):null!=e.lenToRegex_t?(n="t",r=e.lenToRegex_t):null!=e.lenToRegex_h&&(n="h",r=e.lenToRegex_h),i=Object.keys(r).sort(function(e,t){return t-e}),a=[],i.forEach(function(e){return a.push(r[e])}),t["regex_"+n]=RegExp(a.join("|"),"g"),t["initialized_"+n]=!0},e.fn.moedict=function(n){var r,i,a=this;return n=e.extend({lang:"a","class":"moedict-word",spaced:!1,draw:!1,analyze:!1,dryrun:!1,callback:null},n),-1===["a","t","h"].indexOf(n.lang)&&(n.lang="a"),r=function(){return a.each(function(){var r,i,a,o,l,u,c,s;if(r=e(this),i=null!=(a=t["regex_"+n.lang])?a:t.regex_a,o=function(){switch(n.lang){case"t":return"!";case"h":return":";default:return""}}(),n.analyze){if(l=r.text(),u={},l.replace(i,function(e){return u[e]?u[e]++:u[e]=1}),n.callback)return n.callback.call(r,u)}else{if(c=r.html(),s=c.replace(i,function(e){var t;return t=n.draw?"<a href='https://www.moedict.tw/?draw#"+o+e+"' class='"+n["class"]+"'>"+e+"</a>":"<a href='https://www.moedict.tw/#"+o+e+"' class='"+n["class"]+"'>"+e+"</a>",n.spaced&&(t+=" "),t}),!n.dryrun)return r.html(s),r.find("a."+n["class"]).moedictHoverIntent({timeout:250,out:function(){},over:function(){var e,t;return e=jQuery(this).attr("href"),0===jQuery("#moedict").length?(jQuery("<div id='moedict' style='float: right; height: 90%; width: 40%; margin: 0;' >\n  <iframe id='moedictFrame' name='moedictFrame' src='"+e+"' style='width: 100%; height: 100%; margin: 0; border-radius: 20px;' />\n</div>").prependTo("body"),t=jQuery("#moedict"),jQuery(window).scroll(function(){return t.css("margin-top",window.scrollY)})):jQuery("#moedictFrame").attr("src",e)}});if(n.callback)return n.callback.call(r,s)}}),a},i=function(t){return e.ajax({type:"GET",dataType:"jsonp",jsonp:!1,cache:!0,jsonCallback:"_moedictDataCallback",url:"https://www.moedict.tw/lenToRegex."+n.lang+".json.js",complete:function(){return t?t.call():void 0}})},t["initialized_"+n.lang]?r():i(r)},e.fn.moedict.VERSION="1.1.0"}).call(this,jQuery)}).call(this),function(e){e.fn.moedictHoverIntent=function(t,n){var r={sensitivity:7,interval:100,timeout:0};r=e.extend(r,n?{over:t,out:n}:t);var i,a,o,l,u=function(e){i=e.pageX,a=e.pageY},c=function(t,n){return n.hoverIntent_t=clearTimeout(n.hoverIntent_t),Math.abs(o-i)+Math.abs(l-a)<r.sensitivity?(e(n).unbind("mousemove",u),n.hoverIntent_s=1,r.over.apply(n,[t])):(o=i,l=a,n.hoverIntent_t=setTimeout(function(){c(t,n)},r.interval),void 0)},s=function(e,t){return t.hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=0,r.out.apply(t,[e])},d=function(t){var n=jQuery.extend({},t),i=this;i.hoverIntent_t&&(i.hoverIntent_t=clearTimeout(i.hoverIntent_t)),"mouseenter"==t.type?(o=n.pageX,l=n.pageY,e(i).bind("mousemove",u),1!=i.hoverIntent_s&&(i.hoverIntent_t=setTimeout(function(){c(n,i)},r.interval))):(e(i).unbind("mousemove",u),1==i.hoverIntent_s&&(i.hoverIntent_t=setTimeout(function(){s(n,i)},r.timeout)))};return this.bind("mouseenter",d).bind("mouseleave",d)}}(jQuery);